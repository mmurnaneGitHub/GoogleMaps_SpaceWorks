(function(){var d=null;function e(a){return function(b){this[a]=b;};};function h(a){return function(){return this[a];};};var j;function k(a,b,c){this.extend(k,google.maps.OverlayView);this.c=a;this.a=[];this.f=[];this.ca=[53,56,66,78,90];this.j=[];this.A=!1;c=c||{};this.g=c.gridSize||60;this.l=c.minimumClusterSize||2;this.J=c.maxZoom||d;this.j=c.styles||[];this.X=c.imagePath||this.Q;this.W=c.imageExtension||this.P;this.O=!0;if(c.zoomOnClick!=void 0){this.O=c.zoomOnClick;}this.r=!1;if(c.averageCenter!=void 0){this.r=c.averageCenter;}l(this);this.setMap(a);this.K=this.c.getZoom();var f=this;google.maps.event.addListener(this.c,"zoom_changed",function(){var a=f.c.getZoom();if(f.K!=a){f.K=a,f.m();}});google.maps.event.addListener(this.c,"idle",function(){f.i();});b&&b.length&&this.C(b,!1);};j=k.prototype;j.Q="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";j.P="png";j.extend=function(a,b){return function(a){for(var b in a.prototype){this.prototype[b]=a.prototype[b];}return this;}.apply(a,[b]);};j.onAdd=function(){if(!this.A){this.A=!0,n(this);}};j.draw=function(){};function l(a){if(!a.j.length){for(var b=0,c;c=a.ca[b];b++){a.j.push({url:a.X+(b+1)+"."+a.W,height:c,width:c});}}};j.S=function(){for(var a=this.o(),b=new google.maps.LatLngBounds,c=0,f;f=a[c];c++){b.extend(f.getPosition());}this.c.fitBounds(b);};j.z=h("j");j.o=h("a");j.V=function(){return this.a.length;};j.ba=e("J");j.I=h("J");j.G=function(a,b){for(var c=0,f=a.length,g=f;g!==0;){g=parseInt(g/10,10),c++;}c=Math.min(c,b);return {text:f,index:c};};j.$=e("G");j.H=h("G");j.C=function(a,b){for(var c=0,f;f=a[c];c++){q(this,f);}b||this.i();};function q(a,b){b.s=!1;b.draggable&&google.maps.event.addListener(b,"dragend",function(){b.s=!1;a.L();});a.a.push(b);};j.q=function(a,b){q(this,a);b||this.i();};function r(a,b){var c=-1;if(a.a.indexOf){c=a.a.indexOf(b);}else{for(var f=0,g;g=a.a[f];f++){if(g==b){c=f;break;}}}if(c==-1){return !1;}b.setMap(d);a.a.splice(c,1);return !0;};j.Y=function(a,b){var c=r(this,a);return !b&&c?(this.m(),this.i(),!0):!1;};j.Z=function(a,b){for(var c=!1,f=0,g;g=a[f];f++){g=r(this,g),c=c||g;}if(!b&&c){return this.m(),this.i(),!0;}};j.U=function(){return this.f.length;};j.getMap=h("c");j.setMap=e("c");j.w=h("g");j.aa=e("g");j.v=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),f=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),c=b.fromLatLngToDivPixel(c);c.x+=this.g;c.y-=this.g;f=b.fromLatLngToDivPixel(f);f.x-=this.g;f.y+=this.g;c=b.fromDivPixelToLatLng(c);b=b.fromDivPixelToLatLng(f);a.extend(c);a.extend(b);return a;};j.R=function(){this.m(!0);this.a=[];};j.m=function(a){for(var b=0,c;c=this.f[b];b++){c.remove();}for(b=0;c=this.a[b];b++){c.s=!1,a&&c.setMap(d);}this.f=[];};j.L=function(){var a=this.f.slice();this.f.length=0;this.m();this.i();window.setTimeout(function(){for(var b=0,c;c=a[b];b++){c.remove();}},0);};j.i=function(){n(this);};function n(a){if(a.A){for(var b=a.v(new google.maps.LatLngBounds(a.c.getBounds().getSouthWest(),a.c.getBounds().getNorthEast())),c=0,f;f=a.a[c];c++){if(!f.s&&b.contains(f.getPosition())){for(var g=a,u=40000,o=d,v=0,m=void 0;m=g.f[v];v++){var i=m.getCenter();if(i){var p=f.getPosition();if(!i||!p){i=0;}else{var w=(p.lat()-i.lat())*Math.PI/180,x=(p.lng()-i.lng())*Math.PI/180,i=Math.sin(w/2)*Math.sin(w/2)+Math.cos(i.lat()*Math.PI/180)*Math.cos(p.lat()*Math.PI/180)*Math.sin(x/2)*Math.sin(x/2),i=6371*2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));}i<u&&(u=i,o=m);}}o&&o.F.contains(f.getPosition())?o.q(f):(m=new s(g),m.q(f),g.f.push(m));}}}};function s(a){this.k=a;this.c=a.getMap();this.g=a.w();this.l=a.l;this.r=a.r;this.d=d;this.a=[];this.F=d;this.n=new t(this,a.z(),a.w());};j=s.prototype;j.q=function(a){var b;a:if(this.a.indexOf){b=this.a.indexOf(a)!=-1;}else{b=0;for(var c;c=this.a[b];b++){if(c==a){b=!0;break a;}}b=!1;}if(b){return !1;}if(this.d){if(this.r){c=this.a.length+1,b=(this.d.lat()*(c-1)+a.getPosition().lat())/c,c=(this.d.lng()*(c-1)+a.getPosition().lng())/c,this.d=new google.maps.LatLng(b,c),y(this);}}else{this.d=a.getPosition(),y(this);}a.s=!0;this.a.push(a);b=this.a.length;b<this.l&&a.getMap()!=this.c&&a.setMap(this.c);if(b==this.l){for(c=0;c<b;c++){this.a[c].setMap(d);}}b>=this.l&&a.setMap(d);a=this.c.getZoom();if((b=this.k.I())&&a>b){for(a=0;b=this.a[a];a++){b.setMap(this.c);}}else{if(this.a.length<this.l){z(this.n);}else{b=this.k.H()(this.a,this.k.z().length);this.n.setCenter(this.d);a=this.n;a.B=b;a.ga=b.text;a.ea=b.index;if(a.b){a.b.innerHTML=b.text;}b=Math.max(0,a.B.index-1);b=Math.min(a.j.length-1,b);b=a.j[b];a.da=b.url;a.h=b.height;a.p=b.width;a.M=b.textColor;a.e=b.anchor;a.N=b.textSize;a.D=b.backgroundPosition;this.n.show();}}return !0;};j.getBounds=function(){for(var a=new google.maps.LatLngBounds(this.d,this.d),b=this.o(),c=0,f;f=b[c];c++){a.extend(f.getPosition());}return a;};j.remove=function(){this.n.remove();this.a.length=0;delete this.a;};j.T=function(){return this.a.length;};j.o=h("a");j.getCenter=h("d");function y(a){a.F=a.k.v(new google.maps.LatLngBounds(a.d,a.d));};j.getMap=h("c");function t(a,b,c){a.k.extend(t,google.maps.OverlayView);this.j=b;this.fa=c||0;this.u=a;this.d=d;this.c=a.getMap();this.B=this.b=d;this.t=!1;this.setMap(this.c);};j=t.prototype;j.onAdd=function(){this.b=document.createElement("DIV");if(this.t){this.b.style.cssText=A(this,B(this,this.d)),this.b.innerHTML=this.B.text;}this.getPanes().overlayMouseTarget.appendChild(this.b);var a=this;google.maps.event.addDomListener(this.b,"click",function(){var b=a.u.k;google.maps.event.trigger(b,"clusterclick",a.u);b.O&&a.c.fitBounds(a.u.getBounds());});};function B(a,b){var c=a.getProjection().fromLatLngToDivPixel(b);c.x-=parseInt(a.p/2,10);c.y-=parseInt(a.h/2,10);return c;};j.draw=function(){if(this.t){var a=B(this,this.d);this.b.style.top=a.y+"px";this.b.style.left=a.x+"px";}};function z(a){if(a.b){a.b.style.display="none";}a.t=!1;};j.show=function(){if(this.b){this.b.style.cssText=A(this,B(this,this.d)),this.b.style.display="";}this.t=!0;};j.remove=function(){this.setMap(d);};j.onRemove=function(){if(this.b&&this.b.parentNode){z(this),this.b.parentNode.removeChild(this.b),this.b=d;}};j.setCenter=e("d");function A(a,b){var c=[];c.push("background-image:url("+a.da+");");c.push("background-position:"+(a.D?a.D:"0 0")+";");typeof a.e==="object"?(typeof a.e[0]==="number"&&a.e[0]>0&&a.e[0]<a.h?c.push("height:"+(a.h-a.e[0])+"px; padding-top:"+a.e[0]+"px;"):c.push("height:"+a.h+"px; line-height:"+a.h+"px;"),typeof a.e[1]==="number"&&a.e[1]>0&&a.e[1]<a.p?c.push("width:"+(a.p-a.e[1])+"px; padding-left:"+a.e[1]+"px;"):c.push("width:"+a.p+"px; text-align:center;")):c.push("height:"+a.h+"px; line-height:"+a.h+"px; width:"+a.p+"px; text-align:center;");c.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+(a.M?a.M:"black")+"; position:absolute; font-size:"+(a.N?a.N:11)+"px; font-family:Arial,sans-serif; font-weight:bold");return c.join("");};window.MarkerClusterer=k;k.prototype.addMarker=k.prototype.q;k.prototype.addMarkers=k.prototype.C;k.prototype.clearMarkers=k.prototype.R;k.prototype.fitMapToMarkers=k.prototype.S;k.prototype.getCalculator=k.prototype.H;k.prototype.getGridSize=k.prototype.w;k.prototype.getExtendedBounds=k.prototype.v;k.prototype.getMap=k.prototype.getMap;k.prototype.getMarkers=k.prototype.o;k.prototype.getMaxZoom=k.prototype.I;k.prototype.getStyles=k.prototype.z;k.prototype.getTotalClusters=k.prototype.U;k.prototype.getTotalMarkers=k.prototype.V;k.prototype.redraw=k.prototype.i;k.prototype.removeMarker=k.prototype.Y;k.prototype.removeMarkers=k.prototype.Z;k.prototype.resetViewport=k.prototype.m;k.prototype.repaint=k.prototype.L;k.prototype.setCalculator=k.prototype.$;k.prototype.setGridSize=k.prototype.aa;k.prototype.setMaxZoom=k.prototype.ba;k.prototype.onAdd=k.prototype.onAdd;k.prototype.draw=k.prototype.draw;s.prototype.getCenter=s.prototype.getCenter;s.prototype.getSize=s.prototype.T;s.prototype.getMarkers=s.prototype.o;t.prototype.onAdd=t.prototype.onAdd;t.prototype.draw=t.prototype.draw;t.prototype.onRemove=t.prototype.onRemove;})();var gmap=null;var overlay;var MY_MAPTYPE_ID="gray";var bounds;var dialog;var markers=[];var studioMarker=["0"];var Itinerary;var directionDisplay;var directionsService=new google.maps.DirectionsService();var directionsService;var origin=null;var destination=null;var waypoints=[];var markers=[];var directionsVisible=false;var imageIcon=new google.maps.MarkerImage("images/mapIcons/mm_20_blue.png",new google.maps.Size(12,20),new google.maps.Point(0,0),new google.maps.Point(0,20));var shadow=new google.maps.MarkerImage("images/mapIcons/mm_20_shadow.png",new google.maps.Size(22,20),new google.maps.Point(0,0),new google.maps.Point(0,20));var shape={coord:[1,1,1,20,18,20,18,1],type:"poly"};var imageOver=new google.maps.MarkerImage("images/mapIcons/s_orange.png",new google.maps.Size(12,20),new google.maps.Point(0,0),new google.maps.Point(0,20));var myMarker=false;function initialize(){var _1=new dijit.form.Button({label:"Get Directions!",onClick:function(){reset();calcRoute();}},"buttonDirections");var _1=new dijit.form.Button({label:"Reset",onClick:function(){reset();destroyAll();}},"buttonRemove");var _1=new dijit.form.Button({label:"Delete selected Studio(s)",onClick:function(){deleteSelected();}},"buttonDelete");var _2=navigator.userAgent;var _3=new google.maps.LatLng(47.250138520439556,-122.47643585205077);var _4=[{featureType:"administrative",elementType:"all",stylers:[{saturation:-100}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100}]},{featureType:"water",elementType:"all",stylers:[{saturation:-100}]}];var _5={zoom:19,center:_3,panControl:false,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControl:true,mapTypeControlOptions:{mapTypeIds:[MY_MAPTYPE_ID,google.maps.MapTypeId.HYBRID]},scaleControl:true,streetViewControl:false,overviewMapControl:false,mapTypeId:MY_MAPTYPE_ID};gmap=new google.maps.Map(document.getElementById("map_canvas"),_5);var _6={name:"Map"};var _7=new google.maps.StyledMapType(_4,_6);gmap.mapTypes.set(MY_MAPTYPE_ID,_7);var _8=document.createElement("DIV");_8.style.padding="5px 5px 3px 5px";var _9=document.createElement("DIV");_9.style.backgroundColor="white";_9.style.borderStyle="solid";_9.style.borderWidth="2px";_9.style.borderColor="#b2b2b2";_9.style.cursor="pointer";var _a=document.createElement("img");_a.src="images/Logo/Spaceworks.png";_a.style.width="99px";_a.style.height="31px";_a.title="SpaceWorks website";_9.appendChild(_a);_8.appendChild(_9);gmap.controls[google.maps.ControlPosition.TOP_LEFT].push(_8);google.maps.event.addDomListener(_9,"click",function(){window.open("http://spaceworkstacoma.com/");});var _8=document.createElement("DIV");_8.style.padding="0px 0px 0px 5px";var _9=document.createElement("DIV");_9.title="Toggle Itinerary panel";_9.style.backgroundColor="black";_9.style.borderStyle="solid";_9.style.borderWidth="1px";_9.style.borderColor="#b2b2b2";_9.style.textAlign="center";_9.style.width="99px";_9.style.cursor="pointer";var _b=document.createElement("div");_b.style.color="white";_b.style.fontFamily="Arial,sans-serif";_b.style.fontSize="12px";_b.style.paddingLeft="4px";_b.style.paddingRight="4px";_b.innerHTML="ITINERARY";_9.appendChild(_b);_8.appendChild(_9);gmap.controls[google.maps.ControlPosition.LEFT_TOP].push(_8);google.maps.event.addDomListener(_9,"click",function(){dijit.byId("myExpando").toggle();});google.maps.event.addDomListener(_9,"mouseover",function(){});var _8=document.createElement("DIV");_8.style.padding="0px 0px 0px 5px";var _9=document.createElement("DIV");_9.title="Open Help";_9.style.backgroundColor="white";_9.style.borderStyle="solid";_9.style.borderWidth="1px";_9.style.borderColor="#b2b2b2";_9.style.textAlign="center";_9.style.width="99px";_9.style.cursor="pointer";var _b=document.createElement("div");_b.style.color="black";_b.style.fontFamily="Arial,sans-serif";_b.style.fontSize="12px";_b.style.paddingLeft="4px";_b.style.paddingRight="4px";_b.innerHTML="HELP";_9.appendChild(_b);_8.appendChild(_9);gmap.controls[google.maps.ControlPosition.LEFT_TOP].push(_8);google.maps.event.addDomListener(_9,"click",function(){dijit.byId("mapWelcome").show();});google.maps.event.addDomListener(_9,"mouseover",function(){});var _8=document.createElement("DIV");_8.style.padding="0px 7px 5px 5px";var _9=document.createElement("DIV");_9.style.cursor="pointer";var _a=document.createElement("img");_a.src="images/HomeBlue.png";_a.style.width="16px";_a.style.height="16px";_a.title="Zoom to All Studios";_9.appendChild(_a);_8.appendChild(_9);gmap.controls[google.maps.ControlPosition.RIGHT_TOP].push(_8);google.maps.event.addDomListener(_9,"click",function(){gmap.fitBounds(bounds);});overlay=new google.maps.OverlayView();overlay.draw=function(){};overlay.setMap(gmap);if(_2.indexOf("iPhone")!=-1||_2.indexOf("Android")!=-1){navigator.geolocation.watchPosition(displayLocation,handleError);}else{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(displayLocation,handleError);}else{displayLocation("default");}}var _c="<div><b>Create your own itinerary:</b>";_c+="<ul><li>Enter Starting Point information</li>";_c+="<li>Click map marker</li>";_c+="<li>Select <i>Add to my Itinerary</i> <br>(up to 9 Sites)</li>";_c+="</ul></div>";_c+="<div style='border-top:1px solid #C0C0C0;background:#EEEEEE;padding:4px 4px 4px 4px;'>";_c+="<b>Starting Point:</b>";_c+="</div>";_c+="<div style='float:right;'>Address: <input type='text' name='StartAddress1' id='StartAddress1' value='747 Market St' /></div>";_c+="<div style='float:right;'>City: <input type='text' name='StartAddress2' id='StartAddress2' value='Tacoma' /><br />&nbsp;</div>";_c+="<div style='clear:both;background:#EEEEEE;padding:4px 4px 4px 4px;'><b>Itinerary: </b></div>";_c+="<div class='Itinerary Container' style='clear:both;width:230px;'><ol id='Itinerary Node' class='container'></ol></div>";dojo.byId("theItinerary1").innerHTML=_c;dojo.byId("theItinerary2").innerHTML="<i>No Sites selected.</i>";dojo.byId("directions1").innerHTML="<a href='javascript:PrintContent();'>Print Directions</a>";dojo.byId("directions2").innerHTML="<a href=\"javascript:togglePane('rightPane','rightTabs','ItineraryTab');\">Modify Itinerary</a>";Itinerary=new dojo.dnd.Source("Itinerary Node");Itinerary.insertNodes(false,[]);dojo.dnd.Avatar.prototype._generateText=function(){return (this.manager.copy?"copy":"Move to here");};directionsDisplay=new google.maps.DirectionsRenderer();directionsDisplay.setMap(gmap);directionsDisplay.setPanel(document.getElementById("directionsPanel"));bounds=new google.maps.LatLngBounds();};function displayLocation(_d){if(_d=="default"){var _e=new google.maps.LatLng(47.255851508377994,-122.4417709827423);var _f="Tacoma Arts";}else{var _e=new google.maps.LatLng(_d.coords.latitude,_d.coords.longitude);var _f="You are here";}if(!myMarker){var _10=new google.maps.MarkerImage("images/bounce.gif",new google.maps.Size(27,38),new google.maps.Point(0,0),new google.maps.Point(14,19));myMarker=new google.maps.Marker({position:_e,map:gmap,icon:_10,flat:true,draggable:true,title:_f});}else{myMarker.setPosition(_e);}};function handleError(_11){switch(_11.code){case _11.TIMEOUT:alert("Sorry. Timed out.");break;case _11.PERMISSION_DENIED:alert("Sorry. Permission to find your location has been denied.");break;case _11.POSITION_UNAVAILABLE:alert("Sorry. Position unavailable.");break;default:alert("Sorry. Error code: "+_11.code);break;}};function getFilePreventCache(){var _12={url:"SpaceWorks.txt",handleAs:"json",preventCache:true,load:function(_13){var _14="";var _15="";for(var i=0;i<_13.items.length;i++){if(_13.items[i].Latitude>0&&_13.items[i].Longitude<0&&_13.items[i].Active=="Yes"){_15+="<img src=\"images/studios/"+_13.items[i].Photo_name+"T.jpg\" style=\"width:75px;height:100px;margin:2px 5px 5px 0px;border:solid 1px #999;padding:2px\" title='"+_13.items[i].Project_Name+" - Click for details' onclick='google.maps.event.trigger(studioMarker["+_13.items[i].ID_num+"], \"click\")' onmouseover='google.maps.event.trigger(studioMarker["+_13.items[i].ID_num+"], \"mouseover\")'  onmouseout='google.maps.event.trigger(studioMarker["+_13.items[i].ID_num+"], \"mouseout\")' />";var _16="<div style=\"text-align:center;\"><b>"+_13.items[i].Project_Name+"</b>";_16+="<br><img src=\"images/studios/"+_13.items[i].Photo_name+"T.jpg\" style=\"height:100px;margin:2px 5px 5px 0px;border:solid 1px #999;padding:2px\" />";_16+="<br><i>Click marker for details</i></div>";var _17=_13.items[i].Street_Add.split(/,|\(/)[0];if(_13.items[i].Street_Add.search(/opera/i)!=-1){_17="705 Court C";}else{if(_13.items[i].Street_Add.search(/2926 S. Steele St./i)!=-1){_17="2926 S. Steele St.";}else{if(_13.items[i].Street_Add.search(/1901 Commerce St./i)!=-1){_17="1901 Commerce St.";}}}_17=_17.replace("&","and");var _14="<div style='clear:both;float:left;'>";_14+="<a href=\"javascript:myLightbox('images/studios/"+_13.items[i].Photo_name+".jpg','"+_13.items[i].Project_Name.replace(/'/g,"\\'")+"')\"><img style ='float:left;margin:2px 5px 5px 0px;border:solid 1px #999;padding:2px' src='images/studios/"+_13.items[i].Photo_name+"T.jpg' title='Click to enlarge photo' height='100px'></a>";_14+="</div>";_14+="<div style='width: 200px;float:left;'>";_14+=_13.items[i].Description.replace(/""/g,"\"");if(_13.items[i].Project_Dates!=""){_14+="<br><b>Project Dates: </b>"+_13.items[i].Project_Dates;}_14+="<br><a href=\"http://"+_13.items[i].Website+"\" target='_blank'>"+_13.items[i].Website+"</a><br>&nbsp;";_14+="</div>";_14+="<div style='clear:both;'>";_14+="<span style='color:rgb(196,0,0);'>"+_13.items[i].Street_Add+"</span><br>";_14+="<a href=\"http://maps.google.com/?output=classic&cbll="+_13.items[i].Latitude+","+_13.items[i].Longitude+"&cbp=13,0,,,&layer=c&z=17\" target='_blank'>Street View</a>";_14+=" | <a href=\"https://maps.google.com/maps?saddr=my+location&daddr="+_13.items[i].Latitude+","+_13.items[i].Longitude+"\" target='_blank'>Directions from My Location</a>";var _18="Studio "+_13.items[i].ID_num+" - "+_17;_14+="<br><span style=clear:both;float:left;'><b>Add to my Itinerary?</b> <input type='radio' name='Itinerary' id='y' onclick='addStudio(\""+_18+"\");togglePane(\"rightPane\",\"rightTabs\",\"ItineraryTab\");'/>Yes</span><br>";_14+="</div>";var _19="<span style='color:rgb(196,0,0);'>"+_13.items[i].Project_Name+"</span><br><span>&nbsp;"+_13.items[i].Artist+"</span>";addMarker(_13.items[i].Latitude,_13.items[i].Longitude,_16,_14,_19,imageIcon);bounds.extend(new google.maps.LatLng(_13.items[i].Latitude,_13.items[i].Longitude));}}var _1a=new MarkerClusterer(gmap,markers,{maxZoom:17});gmap.fitBounds(bounds);dojo.byId("Studios1").innerHTML=_15;},error:function(_1b){alert("An unexpected error occurred: "+_1b);}};var _1c=dojo.xhrGet(_12);};function showIconLegend(_1d){dijit.byId(_1d).show();};function addMarker(_1e,_1f,sum,_20,_21,_22){var _23=new google.maps.LatLng(_1e,_1f);var _24=new google.maps.Marker({position:_23,shadow:shadow,icon:_22,shape:shape,optimized:false,map:gmap});markers.push(_24);google.maps.event.addListener(_24,"mouseover",function(){if(!(gmap.getBounds().contains(_24.getPosition()))){gmap.setCenter(_23);}if(gmap.getBounds().contains(_24.getPosition())){_24.setIcon(imageOver);var evt=_24.getPosition();var _25=overlay.getProjection().fromLatLngToContainerPixel(evt);closeDialog();var _26=new dijit.TooltipDialog({id:"tooltipDialog",content:sum,style:"position: absolute;z-index:100"});_26.startup();dojo.style(_26.domNode,"opacity",0.85);dijit.placeOnScreen(_26.domNode,{x:_25.x,y:_25.y},["BL","TL","BR","TR"],{x:15,y:10});}});google.maps.event.addListener(_24,"mouseout",function(){_24.setIcon(_22);closeDialog();});google.maps.event.addListener(_24,"click",function(){myDialog(_20,_21);});studioMarker.push(_24);};function closeDialog(){var _27=dijit.byId("tooltipDialog");if(_27){_27.destroy();}};function myDialog(_28,_29){myDlg=new dijit.Dialog({draggable:false});myDlg.titleNode.innerHTML=_29;myDlg.attr("content",_28);myDlg.show();dojo.connect(dijit._underlay,"onClick",function(e){myDlg.destroy();});};function myLightbox(url,_2a){dialog.show({href:url,title:_2a});};function calcRoute(){directionsDisplay.setPanel(document.getElementById("directionsPanel"));origin=dojo.byId("StartAddress1").value+","+dojo.byId("StartAddress2").value;var _2b=dojo.byId("Itinerary Node"),_2c=_2b.getElementsByTagName("li");for(i=0;i<_2c.length;i++){destination=_2c[i].innerHTML+",Tacoma,WA";if(i+1!=_2c.length){waypoints.push({location:destination,stopover:true});}}var _2d=google.maps.DirectionsTravelMode.DRIVING;var _2e={origin:origin,destination:destination,waypoints:waypoints,travelMode:_2d,optimizeWaypoints:document.getElementById("optimize").checked};if(_2c.length==0){alert("No Sites in Itinerary.");}else{if(dojo.byId("StartAddress1").value==""){alert("Please enter a Starting Point Address.");}else{directionsService.route(_2e,function(_2f,_30){if(_30==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(_2f);togglePane("rightPane","rightTabs","DirectionsTab");}});clearMarkers();directionsVisible=true;}}};function clearMarkers(){for(var i=0;i<markers.length;i++){markers[i].setMap(null);}};function clearWaypoints(){markers=[];origin=null;destination=null;waypoints=[];directionsVisible=false;};function reset(){clearMarkers();clearWaypoints();directionsDisplay.setMap(null);directionsDisplay.setPanel(null);directionsDisplay=new google.maps.DirectionsRenderer();directionsDisplay.setMap(gmap);directionsDisplay.setPanel(document.getElementById("theDirections"));gmap.fitBounds(bounds);};function togglePane(_31,tab,_32){if(!(dijit.byId("myExpando")._showing)){dijit.byId("myExpando").toggle();}if(!(dijit.byId(_31)._showing)){dijit.byId(tab).selectChild(_32);}else{if(dijit.byId(tab).selectedChildWidget.id!=_32){dijit.byId(tab).selectChild(_32);}else{dijit.byId(_31).toggle();}}};function destroyAll(){dojo.empty("Itinerary Node");dojo.byId("theItinerary2").style.display="block";dojo.byId("theItinerary3").style.display="none";dojo.byId("theItinerary4").style.display="none";};function addStudio(_33){var _34="No";var _35=dojo.byId("Itinerary Node"),_36=_35.getElementsByTagName("li");if(_36.length==9){alert("Itinerary limited to 9 Sites.  Please remove a Site from Itinerary before adding additional Sites.");}else{for(i=0;i<_36.length;i++){if(_36[i].innerHTML==_33){_34="Yes";}}if(_34=="No"){Itinerary.insertNodes(false,[_33]);}}if(dojo.byId("theItinerary2").style.display="block"){dojo.byId("theItinerary2").style.display="none";dojo.byId("theItinerary3").style.display="block";dojo.byId("theItinerary4").style.display="block";}};function deleteSelected(){Itinerary.deleteSelectedNodes();};function PrintContent(){var _37=document.getElementById("directionsPanel");var _38=window.open("","PrintWindow","width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");_38.document.writeln(_37.innerHTML);_38.document.close();_38.focus();_38.print();};function go2studio(lat,lon){myDlg.destroy();var _39=new google.maps.LatLngBounds();var _3a=new google.maps.LatLng(lat,lon);_39.extend(_3a);gmap.setZoom(17);gmap.setCenter(_39.getCenter());};require(["dojo/parser","dijit/layout/BorderContainer","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Button","dojox/image/Lightbox","dijit/Dialog","dijit/TooltipDialog","dojo/dnd/Source","dojox/layout/ExpandoPane","dojo/domReady!"],function(_3b){_3b.parse();initialize();getFilePreventCache();dialog=new dojox.image.LightboxDialog().startup();dijit.byId("mapWelcome").show();});